proxy_http_version 1.1;
proxy_set_header Connection "";
proxy_set_header Host 47.236.154.101;
proxy_set_header Accept-Encoding "";
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header Referer "http://47.236.154.101/";

# Hide origin headers
proxy_hide_header Server;
proxy_hide_header X-Powered-By;
proxy_hide_header Via;
proxy_hide_header X-Origin-Server;

# Buffering
proxy_buffering on;
proxy_buffer_size 16k;
proxy_buffers 4 32k;
proxy_busy_buffers_size 64k;

# Cache
proxy_cache iptv_cache;
proxy_cache_key "$scheme$host$request_uri";
proxy_cache_valid 200 302 10m;
proxy_cache_valid 404 1m;

# Timeouts
proxy_connect_timeout 10s;
proxy_send_timeout 300s;
proxy_read_timeout 300s;

# Headers to add
add_header Access-Control-Allow-Origin "*";
add_header Cache-Control "public, max-age=300";
add_header X-Proxy-Cache $upstream_cache_status;
add_header X-Proxy-Server "Koyeb-Global-CDN";
add_header X-Content-Type-Options "nosniff";
add_header X-Frame-Options "SAMEORIGIN";
