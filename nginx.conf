worker_processes auto;
error_log /var/log/nginx/error.log warn;

events {
    worker_connections 1024;
}

http {
    include /etc/nginx/mime.types;
    default_type application/octet-stream;
    
    server {
        listen 8080;
        server_name _;
        
        # ========== MAIN PAGE ==========
        location / {
            add_header Content-Type text/html;
            return 200 '<!DOCTYPE html>
<html>
<head>
    <title>beIN Sports Streaming</title>
    <meta charset="utf-8">
    <style>
        body { font-family: Arial; padding: 20px; background: #1a1a1a; color: white; }
        h1 { color: #ff5722; }
        .channel { background: #2a2a2a; padding: 15px; margin: 10px 0; border-radius: 5px; }
        a { color: #4fc3f7; text-decoration: none; margin-right: 10px; }
        a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <h1>üì∫ beIN Sports Streaming</h1>
    <p>All channels proxied through Koyeb</p>
    
    <div class="channel">
        <strong>beIN MAX 1 4K</strong><br>
        <a href="/max1">‚ñ∂Ô∏è Play in Browser</a>
        <a href="/playlist.m3u#max1">üìù Add to Playlist</a>
    </div>
    
    <div class="channel">
        <strong>beIN MAX 2 4K</strong><br>
        <a href="/max2">‚ñ∂Ô∏è Play in Browser</a>
        <a href="/playlist.m3u#max2">üìù Add to Playlist</a>
    </div>
    
    <div class="channel">
        <strong>beIN Sports 1 HD</strong><br>
        <a href="/s1">‚ñ∂Ô∏è Play in Browser</a>
        <a href="/playlist.m3u#s1">üìù Add to Playlist</a>
    </div>
    
    <div style="margin-top: 30px; padding: 20px; background: #333; border-radius: 5px;">
        <a href="/playlist.m3u" style="color: #ff9800; font-weight: bold; font-size: 18px;">
            üì• Download Complete M3U Playlist (19 Channels)
        </a>
    </div>
</body>
</html>';
        }
        
        # ========== CHANNELS ==========
        
        # beIN MAX 1 4K
        location = /max1 {
            proxy_pass http://47.236.154.101/redirect.php?id=227570;
            proxy_set_header Host 47.236.154.101;
            proxy_set_header Accept-Encoding "";
            proxy_buffering off;
            add_header Access-Control-Allow-Origin "*";
        }
        
        # beIN MAX 2 4K
        location = /max2 {
            proxy_pass http://47.236.154.101/redirect.php?id=227571;
            proxy_set_header Host 47.236.154.101;
            proxy_set_header Accept-Encoding "";
            proxy_buffering off;
            add_header Access-Control-Allow-Origin "*";
        }
        
        # beIN News HD
        location = /news {
            proxy_pass http://47.236.154.101/redirect.php?id=67374;
            proxy_set_header Host 47.236.154.101;
            proxy_set_header Accept-Encoding "";
            proxy_buffering off;
            add_header Access-Control-Allow-Origin "*";
        }
        
        # beIN HD
        location = /hd {
            proxy_pass http://47.236.154.101/redirect.php?id=67373;
            proxy_set_header Host 47.236.154.101;
            proxy_set_header Accept-Encoding "";
            proxy_buffering off;
            add_header Access-Control-Allow-Origin "*";
        }
        
        # beIN Sports 1
        location = /s1 {
            proxy_pass http://47.236.154.101/redirect.php?id=67742;
            proxy_set_header Host 47.236.154.101;
            proxy_set_header Accept-Encoding "";
            proxy_buffering off;
            add_header Access-Control-Allow-Origin "*";
        }
        
        # beIN Sports 2
        location = /s2 {
            proxy_pass http://47.236.154.101/redirect.php?id=67743;
            proxy_set_header Host 47.236.154.101;
            proxy_set_header Accept-Encoding "";
            proxy_buffering off;
            add_header Access-Control-Allow-Origin "*";
        }
        
        # beIN Sports 3
        location = /s3 {
            proxy_pass http://47.236.154.101/redirect.php?id=67744;
            proxy_set_header Host 47.236.154.101;
            proxy_set_header Accept-Encoding "";
            proxy_buffering off;
            add_header Access-Control-Allow-Origin "*";
        }
        
        # beIN Sports 4
        location = /s4 {
            proxy_pass http://47.236.154.101/redirect.php?id=67745;
            proxy_set_header Host 47.236.154.101;
            proxy_set_header Accept-Encoding "";
            proxy_buffering off;
            add_header Access-Control-Allow-Origin "*";
        }
        
        # beIN Sports 5
        location = /s5 {
            proxy_pass http://47.236.154.101/redirect.php?id=67746;
            proxy_set_header Host 47.236.154.101;
            proxy_set_header Accept-Encoding "";
            proxy_buffering off;
            add_header Access-Control-Allow-Origin "*";
        }
        
        # beIN Sports 6
        location = /s6 {
            proxy_pass http://47.236.154.101/redirect.php?id=67747;
            proxy_set_header Host 47.236.154.101;
            proxy_set_header Accept-Encoding "";
            proxy_buffering off;
            add_header Access-Control-Allow-Origin "*";
        }
        
        # beIN Sports 7
        location = /s7 {
            proxy_pass http://47.236.154.101/redirect.php?id=67748;
            proxy_set_header Host 47.236.154.101;
            proxy_set_header Accept-Encoding "";
            proxy_buffering off;
            add_header Access-Control-Allow-Origin "*";
        }
        
        # beIN Sports 8
        location = /s8 {
            proxy_pass http://47.236.154.101/redirect.php?id=67749;
            proxy_set_header Host 47.236.154.101;
            proxy_set_header Accept-Encoding "";
            proxy_buffering off;
            add_header Access-Control-Allow-Origin "*";
        }
        
        # beIN Sports 9
        location = /s9 {
            proxy_pass http://47.236.154.101/redirect.php?id=67750;
            proxy_set_header Host 47.236.154.101;
            proxy_set_header Accept-Encoding "";
            proxy_buffering off;
            add_header Access-Control-Allow-Origin "*";
        }
        
        # beIN XTRA 1
        location = /xtra1 {
            proxy_pass http://47.236.154.101/redirect.php?id=219946;
            proxy_set_header Host 47.236.154.101;
            proxy_set_header Accept-Encoding "";
            proxy_buffering off;
            add_header Access-Control-Allow-Origin "*";
        }
        
        # beIN XTRA 2
        location = /xtra2 {
            proxy_pass http://47.236.154.101/redirect.php?id=219949;
            proxy_set_header Host 47.236.154.101;
            proxy_set_header Accept-Encoding "";
            proxy_buffering off;
            add_header Access-Control-Allow-Origin "*";
        }
        
        # beIN XTRA 3
        location = /xtra3 {
            proxy_pass http://47.236.154.101/redirect.php?id=222053;
            proxy_set_header Host 47.236.154.101;
            proxy_set_header Accept-Encoding "";
            proxy_buffering off;
            add_header Access-Control-Allow-Origin "*";
        }
        
        # beIN AFC1
        location = /afc1 {
            proxy_pass http://47.236.154.101/redirect.php?id=219943;
            proxy_set_header Host 47.236.154.101;
            proxy_set_header Accept-Encoding "";
            proxy_buffering off;
            add_header Access-Control-Allow-Origin "*";
        }
        
        # beIN AFC2
        location = /afc2 {
            proxy_pass http://47.236.154.101/redirect.php?id=222044;
            proxy_set_header Host 47.236.154.101;
            proxy_set_header Accept-Encoding "";
            proxy_buffering off;
            add_header Access-Control-Allow-Origin "*";
        }
        
        # beIN AFC3
        location = /afc3 {
            proxy_pass http://47.236.154.101/redirect.php?id=222045;
            proxy_set_header Host 47.236.154.101;
            proxy_set_header Accept-Encoding "";
            proxy_buffering off;
            add_header Access-Control-Allow-Origin "*";
        }
        
        # ========== M3U PLAYLIST ==========
        location = /playlist.m3u {
            default_type application/vnd.apple.mpegurl;
            add_header Content-Disposition 'attachment; filename="bein-sports-koyeb.m3u"';
            add_header Access-Control-Allow-Origin "*";
            
            return 200 '#EXTM3U
#EXTINF:-1,beIN MAX 1 4K
http://$host/max1
#EXTINF:-1,beIN MAX 2 4K
http://$host/max2
#EXTINF:-1,beIN News HD
http://$host/news
#EXTINF:-1,beIN HD
http://$host/hd
#EXTINF:-1,beIN SPORTS 1 HD
http://$host/s1
#EXTINF:-1,beIN SPORTS 2 HD
http://$host/s2
#EXTINF:-1,beIN SPORTS 3 HD
http://$host/s3
#EXTINF:-1,beIN SPORTS 4 HD
http://$host/s4
#EXTINF:-1,beIN SPORTS 5 HD
http://$host/s5
#EXTINF:-1,beIN SPORTS 6 HD
http://$host/s6
#EXTINF:-1,beIN SPORTS 7 HD
http://$host/s7
#EXTINF:-1,beIN SPORTS 8 HD
http://$host/s8
#EXTINF:-1,beIN SPORTS 9 HD
http://$host/s9
#EXTINF:-1,beIN XTRA 1 HD
http://$host/xtra1
#EXTINF:-1,beIN XTRA 2 HD
http://$host/xtra2
#EXTINF:-1,beIN XTRA 3 HD
http://$host/xtra3
#EXTINF:-1,beIN AFC1 HD
http://$host/afc1
#EXTINF:-1,beIN AFC2 HD
http://$host/afc2
#EXTINF:-1,beIN AFC3 HD
http://$host/afc3';
        }
        
        # ========== HEALTH CHECK ==========
        location = /health {
            access_log off;
            return 200 "OK\n";
            add_header Content-Type text/plain;
        }
    }
}
